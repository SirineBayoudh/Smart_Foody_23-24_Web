{% extends 'base_accueil.html.twig' %}

{% block title %}Hello StockClientController!{% endblock %}

{% block bodyStock %}
    
    <div class="hero-wrap hero-bread" style="background-image: url('{{ asset('images/bg_1.jpg') }}');">
        <div class="container">
            <div class="row no-gutters slider-text align-items-center justify-content-center">
                <div class="col-md-9 ftco-animate text-center">
                    <h1 class="mb-0 bread">Stock en arrivage</h1>
                </div>
            </div>
        </div>
    </div>
    
    <section class="ftco-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-10 mb-5 text-center">
                    <ul class="product-category">
                        <li><a href="#" class="category-link active" data-category="all">All</a></li>
                        <li><a href="#" class="category-link" data-category="legume">Vegetables</a></li>
                        <li><a href="#" class="category-link" data-category="fruit">Fruits</a></li>
                        <li><a href="#" class="category-link" data-category="laitier">Laitiers</a></li>
                        <li><a href="#" class="category-link" data-category="grain">Grain</a></li>
                    </ul>
                </div>
            </div>
            <div class="row" id="stock-list">
                {% for stock in futureStocks %}
                    <div class="col-md-6 col-lg-3 ftco-animate category-item" data-category="{{ stock.getRefProduit().getCategorie() }}">
                        <div class="product">
                            <a href="#" class="img-prod"><img class="img-fluid" src="{{ asset('images/' ~ stock.image) }}" alt="{{ stock.nom }}">
                            <span class='status'>Stock en arrivage</span>
                            <div class="overlay"></div>
                            </a>
                    
                            <div class="text py-3 pb-4 px-3 text-center">
                                <h3>{{ stock.nom }}</h3>
                                <div class="d-flex">
                                    <div class="pricing">
                                        <p class="price"><span>{{ stock.quantite }} kilo</span></p>
                                    </div>
                                </div>
                                <p>{{ stock.DateArrivage|date('Y-m-d') }}</p>
                                  
                                <!-- Autres informations sur le stock -->
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
      
    <!-- Ajoutez cet élément où vous souhaitez afficher les marques -->
    <ul id="marques-list"></ul>

    <script>
         document.addEventListener("DOMContentLoaded", function () {
            const categoryLinks = document.querySelectorAll(".category-link");

            categoryLinks.forEach(function (link) {
                link.addEventListener("click", function (event) {
                    event.preventDefault();

                    // Supprimer la classe active de tous les liens de catégorie
                    categoryLinks.forEach(function (item) {
                        item.classList.remove("active");
                    });

                    // Ajouter la classe active au lien de catégorie sélectionné
                    link.classList.add("active");

                    const category = link.dataset.category;
                    const categoryItems = document.querySelectorAll('.category-item');
                    categoryItems.forEach(function(item) {
                        if (category === 'all' || item.dataset.category === category) {
                            item.style.display = 'block';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            });
        });
      document.addEventListener("DOMContentLoaded", function () {
    // Sélectionnez tous les liens de catégorie
    const categoryLinks = document.querySelectorAll(".category-link");

    // Ajoutez un écouteur d'événements à chaque lien de catégorie
    categoryLinks.forEach(function (link) {
        link.addEventListener("click", function (event) {
            // Empêchez le comportement par défaut du lien
            event.preventDefault();

            // Récupérez la catégorie à partir de l'attribut data-category du lien
            const category = link.dataset.category;

            // Mettre à jour l'affichage des stocks en fonction de la catégorie sélectionnée
            const categoryItems = document.querySelectorAll('.category-item');
            categoryItems.forEach(function(item) {
                if (category === 'all' || item.dataset.category === category) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        });
    });
});

    </script>

{% endblock %}

{% extends 'base_back.html.twig' %}
{% block body %}
	<div class="main-panel">
		<div class="content-wrapper" style="width: 2200px;">
			<div class="row" style="width: 1000px;">
				<div class="col-md-6 grid-margin stretch-card">
					<div class="card">
						<div class="card-body">
							<h4 class="card-title">Donner une réponse</h4>
							{% for message in app.flashes('success') %}
								<div class="alert alert-success" role="alert">
									{{ message }}
								</div>
							{% endfor %}
							<div class="form-group">
								{{ form_start(fUpdate) }}
								{{ form_label(fUpdate.reponse, 'Demande') }}
								{{ form_widget(fUpdate.demande, {'attr': {'class': 'form-control'}}) }}
								{{ form_errors(fUpdate.demande) }}
							</div>
							<div class="form-group">
								{{ form_label(fUpdate.reponse, 'Réponse') }}
								{{ form_widget(fUpdate.reponse, {'attr': {'class': 'form-control'}}) }}
								{{ form_errors(fUpdate.reponse) }}
							</div>
							<br>
							<button type="submit" class="btn btn-success">Modifier</button>
							{{ form_end(fUpdate) }}
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-6 grid-margin stretch-card">
					<div class="card">
						<div class="card-body">
							<h4 class="card-title">Liste des demandes</h4>
							<div class="table-responsive">
								<table class="table table-hover">
									<thead>
										<tr class="text-center">
											<th>Client</th>
											<th>Statut</th>
											<th>Demande</th>
											<th>Réponse</th>
											<th>Note</th>
											<th>Date</th>
											<th>Actions</th>
										</tr>
									</thead>
									<tbody>
										{% for a in conseils %}
											<tr class="text-center">
												<td>{{ a.getIdClient().getPrenom() ~ ' ' ~ a.getIdClient().getNom() }}</td>
												{% if a.statut == 'terminé' %}
													<td>
														<label class="badge badge-success">{{ a.statut }}</label>
													</td>
												{% elseif a.statut == 'en attente' %}
													<td>
														<label class="badge badge-warning">{{ a.statut }}</label>
													</td>
												{% else %}
													<td>{{ a.statut }}</td>
												{% endif %}
												<td>{{ a.demande }}</td>
												<td>{{ a.reponse }}</td>
												{% if a.note <= 2 %}
													<td class="text-danger">{{ a.note }}</td>
												{% else %}
													<td class="text-success">{{ a.note }}</td>
												{% endif %}
												<td>{{ a.dateConseil|date("d/m/Y") }}</td>
												<td>
													<button type="button" class="btn btn-danger btn-rounded btn-fw">
														<a href="{{ path('conseil_rep_update', {'id': a.idConseil}) }}" style="color: white;">Modifier</a>
													</button>
												</td>
											</tr>
										{% endfor %}
									</tbody>
								</table>
							</div>
							<div class="d-flex justify-content-center">
								{{ knp_pagination_render(conseils) }}
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
